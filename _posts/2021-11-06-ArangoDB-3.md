---
layout: post
title: <ArangoDB> 3. 아랑고DB 사용해보기 
categories: ArangoDB
---
  
<div class="message">
이번 글에서는 아랑고DB의 쉘을 사용해 아랑고DB의 기초 사용법을 배워보려고 한다. 사실 실제 작업은 Python 커넥터를 통해서 하는 경우가 대부분이지만, 실체를 알기 위해서는 직접 쉘로 붙어보는 것이 가장 효과적이라고 생각하기 때문이다.
</div>

## 들어가기에 앞서
  - 아랑고DB가 이미 설치되어있다고 가정한다. 만약 아직 설치되지 않았다면 [여기](https://ud803.github.io/arangodb/2021/11/02/ArangoDB-2/)를 보고 따라 설치해보자.
  - 또한 아랑고쉘은 JavaScript Shell 환경을 사용한다고 한다. 따라서 JS문법을 그대로 이용할 수 있다.
  
## 1. 데이터베이스 수준 명령어
  초기 실행은 `arangosh` 명령어를 통해 한다. 그리고 초기에 입력했던 `root` 계정의 비밀번호를 입력해주면 된다. 
  쉘에 접속 후 `tutorial` 명령어를 입력하면 간단한 튜토리얼도 따라할 수 있으니 참고하자.
  
  쉘에 접속했을 때 기본 데이터베이스는 `_system` 이다. 이제 `movies`라는 데이터베이스를 만들고, `titles`라는 도큐먼트 컬렉션을 만들어 볼 것이다.
  데이터베이스 이름을 짓는 [Naming Convention]https://www.arangodb.com/docs/stable/data-modeling-naming-conventions-database-names.html)도 읽어보자.
  
{% highlight js %}
// 현재 아랑고DB에 있는 데이터베이스들의 목록을 조회한다 
127.0.0.1:8529@_system> db._databases()
[ 
  "_system" 
]

// movies라는 데이터베이스를 만든다
127.0.0.1:8529@_system> db._createDatabase('movies')
true

// 생성된 것을 확인할 수 있다
127.0.0.1:8529@_system> db._databases()
[ 
  "_system", 
  "movies" 
]

// 데이터베이스를 변경해준다
127.0.0.1:8529@_system> db._useDatabase('movies')
true

// 컬렉션을 생성해준다. 탭을 눌러 자동완성 기능을 애용하자
// 컬렉션은 Edge Collection과 Document Collection으로 나뉘는데, 여기서는 단순히 도큐먼트의 집합을 생성할 예정이다.
127.0.0.1:8529@movies> db._createDocumentCollection('titles')
[ArangoCollection 139708, "titles" (type document, status loaded)]

127.0.0.1:8529@movies> db._collections()
[ 
  [ArangoCollection 139603, "_analyzers" (type document, status loaded)], 
  [ArangoCollection 139618, "_appbundles" (type document, status loaded)], 
  [ArangoCollection 139615, "_apps" (type document, status loaded)], 
  [ArangoCollection 139606, "_aqlfunctions" (type document, status loaded)], 
  [ArangoCollection 139621, "_frontend" (type document, status loaded)], 
  [ArangoCollection 139600, "_graphs" (type document, status loaded)], 
  [ArangoCollection 139612, "_jobs" (type document, status loaded)], 
  [ArangoCollection 139609, "_queues" (type document, status loaded)], 
  [ArangoCollection 139708, "titles" (type document, status loaded)] 
]
{% endhighlight %}

도큐먼트 컬렉션과 엣지 컬렉션은 데이터 모델의 성격에 따라 구분되는 컬렉션이다. 도큐먼트 컬렉션은 그래프DB에서 노드(버텍스)의 개념이고, 엣지 컬렉션은 이 노드들 사이의 관계를 나타내는 컬렉션이다.

## 2. 컬렉션 수준 명령어
이제 생성된 컬렉션 안에 도큐먼트를 추가해보자. 사실 쉘에서 데이터를 넣는 방식은 불편하기 때문에 이런 방법도 있다 정도로만 끝내려고 한다.
 {% highlight js %}
// 쉘에서는 db.컬렉션명을 통해 컬렉션 함수에 접근한다
127.0.0.1:8529@movies> db.titles.save({title: "Harry Potter 1"})
{ 
  "_id" : "titles/140292", 
  "_key" : "140292", 
  "_rev" : "_dNTU1bG---" 
}

// toArray() 함수를 통해 컬렉션의 모든 도큐먼트를 조회한다
127.0.0.1:8529@movies> db.titles.toArray()
[ 
  { 
    "_key" : "140292", 
    "_id" : "titles/140292", 
    "_rev" : "_dNTU1bG---", 
    "title" : "Harry Potter 1" 
  } 
]

// 
127.0.0.1:8529@movies> db.titles.document('140292')
{ 
  "_key" : "140292", 
  "_id" : "titles/140292", 
  "_rev" : "_dNTU1bG---", 
  "title" : "Harry Potter 1" 
}
{% endhighlight %}

## 4. 어디까지 왔나
다음 글에서는 아랑고DB의 데이터 구조에 대해 간단하게 알아보고, 아랑고 쉘에서 명령어를 통해 여러가지 CRUD 작업을 해서 실체를 익혀보려고 한다.
  
1. [아랑고DB란? 왜 쓰는가?](https://ud803.github.io/arangodb/2021/10/31/ArangoDB-1/)
2. **(지금 보고있는 글) 아랑고DB 세팅하기 on Ubuntu**
3. 아랑고DB 쉘로 붙어서 명령어 체험해보기, 실체 파악해보기
4. 아랑고DB Web UI 체험하기
5. AQL 몇 개 보면서 경험해보기
6. Python-Arango 라이브러리 활용하여 기본 기능 익히기
7. Relational/Document to ArangoDB Mapper 써서 데이터 대량으로 넣어보기
8. 넣은 데이터로 간단한 실습해보기
9. 넣은 데이터로 깊이있는 실습해보기
